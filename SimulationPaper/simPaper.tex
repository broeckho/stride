\documentclass[runningheads]{llncs}

\usepackage{graphicx}
% Used for displaying a sample figure. If possible, figure files should
% be included in EPS format.
\usepackage{float}

\begin{document}
%
\title{Simulation Paper}

\author{Benjamin Vandersmissen\inst{1} \and
Lars Van Roy\inst{2} \and \\
Evelien Daems\inst{3} \and
Frank Jan Fekkes\inst{4}}
%
\authorrunning{B. Vandersmissen, L. Van Roy, E. Daems, F.J. Fekkes}
% First names are abbreviated in the running head.
% If there are more than two authors, 'et al.' is used.
%
\institute{
\email{benjamin.vandersmissen@student.uantwerpen.be} \and
\email{lars.vanroy@student.uantwerpen.be} \and
\email{evelien.daems@student.uantwerpen.be} \and
\email{franciscus.fekkes@student.uantwerpen.be}}
%
\maketitle              % typeset the header of the contribution
%
\begin{abstract}
In this paper we will examine the Stride tool and discover its functionalities.
We will discuss some findings about the use of different parameters, populations and more.
In the end there is a brief discussion of the performance of the program, a very important topic within computer related problems.

%\keywords{First keyword  \and Second keyword \and Another keyword.}
\end{abstract}

\section{Simulation}

\subsection{Stochastic variation}
We use the Stan (STochatsic ANalysis) controller to examine the influence of stochasticity on the results obtained from the simulation. \\ \\
In Figure \ref{fig1} the number of cummulative cases per time-step is plotted. Here we can observe an exponential grow of the number of cases througout time. This is not surprisingly because it can be deducted from common reasoning. If per time more people are affected, a larger contactpool is possibly infected. These people who are now new carriers of the disease will enter their personal contactpool and again more people will be reached.\\ \\
Towards the end a flattening of the curve occurs. This is not something totally unexpected because the population is obviously not infinite. At one point anyone who can be infected will effectively become a carrier of the disease.\\ \\
The same reasoning can explain the curve in Figure \ref{fig2}. Now the cases are not the cummulative ones but the number of new cases in each time-step. A similar course of the curve can be observed.

\begin{figure}
	\includegraphics[width=\textwidth]{fig1.png}
	\caption{Result of a number of stochastic runs. The figure displays the distribution of the number of cummulative cases per time-step.} 	
	\label{fig1}

	\includegraphics[width=\textwidth]{fig2.png}
	\caption{Result of a number of stochastic runs. The figure displays the distribution of the number of new cases per time-step.} 
	\label{fig2}
\end{figure} 
\newpage


\subsection{Determining an extinction threshold}
In the previous section 1.1 (Stochastic variation) we found that extinction will influence the outcome. It is neccessary to be able to exclusively look at outbreaks. If we can find some threshold where there is a clear difference between large outbreaks and extinctions we can seperate the two scenarios.\\ \\
After creating a number of simulations we can plot the total number of infected cases and their occurences.  We used the file "stochastic\_analysis.xml" for the simulations. After running the simulator the outcome is plotted in the histogram in Figure \ref{fig3} where the frequency of the amount of infected cases is plotted.\\ \\
There is a clear distinction between large outbreaks and smaller ones. The smaller ones are again plotted in the second histogram "extinction\_small.jpg". There it can be noticed that small outbreaks are really small (25 maximum). Which can be called an extinction after 500 days. The threshold can be set between than 50 and 25 000. Either of those thresholds should eliminate all extinctions in this case.\\ \\
A very low threshold might allow some extinctions to be passed while a high threshold might eliminate an outbreak. What can be noticed is the total lack of simulations between 100 and 25000 infected cases. But there can still be exceptions in the infected cases. A threshold of 1000 would be more than adequate. It will eliminate all extinctions while keeping the outbreaks.\\ \\
It should be noted that this threshold will change for al lot of variables. Variables like time and population will affect the threshold. A new threshold should be determined for each simulation.

\begin{figure}
	\includegraphics[width=\textwidth]{extinction_all.jpg}	
	\caption{}
	\label{fig3}
	
	\includegraphics[width=\textwidth]{extinction_small.jpg}
	\caption{}	
	\label{fig4}
\end{figure}
\newpage

\subsection{Estimating the immunity level}
For this assignment we had to estimate the percentage of people who were immune to the disease given the following graph.
\\ 
\begin{figure}[h!]
	\includegraphics[width=\textwidth]{original.png}
	\caption{New cases observed per day during the outbreak}
\end{figure}
\newpage
As a first approximation we performed 10 simulations with immunity levels ranging from 0 to 90\% as seen in the next graph. As we can clearly see, all immunity levels lower then 50\% are unrealistic, compared to the desired graph. As a next step we decided to drop off the unrealistic immunity levels and generated a zoom of the realistic immunity levels with the same offset.
\begin{figure}
	\includegraphics[width=\textwidth]{test_immunity_0-100.png}
	\caption{first estimate of outbreaks}
\end{figure}
\newpage

\newpage
\noindent
By dropping all percentages lower then 60 and higher then 90\% we get the following graph, this graph is a lot closer to the desired graph (since the highest number of new cases is now only 350 compared to over 6000), but is still far from accurate. We can now see that the desired immunity rate should lie somewhere between 70 and 80\% as 70 is too high and 80 is too low.
\begin{figure}
	\includegraphics[width=\textwidth]{test_immunity_70-80.png}
	\caption{first estimate of outbreaks}
\end{figure}

\newpage
\noindent
Finally, we zoom in between 70 and 75\% and we can see that the immunity percentage is somewhere around the 72 an 73\% mark. the 73\% evolution approaches the desired graph but then halts at the end of it's domain, the 72\% immunity graph has the same evolution as the desired graph, but is a little bit too high at the end.
\begin{figure}
	\includegraphics[width=\textwidth]{test_immunity_70-75.png}
	\caption{first estimate of outbreaks}
\end{figure}
\newpage

\subsection{Estimating R\textsubscript{0}}

\section{Population generation}

\subsection{Investigating the influence of demography on epidemics}

\subsection{Vaccinating on campus}
\newpage

\subsection{Is commuting to work important for disease spread?}
One could easily assume that working at a different location affects the rate at which a disease spreads, as it enhances it's reach. In a first simulation we generated simulations for 5 different commuting percentages. As you can clearly see, it does affect the rate at which the disease spreads, but it has no, or little, effect on whether the disease does or does not spread. In all cases, the entire population got the disease, be it that it took a few days longer to get to that point. Another thing we can remark is that the highest "peak" of newly diseased people is lower the lower the commuting factor gets. A possible cause of the lack of serious effect can come from the fact there are a lot of college commuters who will have the same effect as the workplace commuters. 

\begin{figure}
	\includegraphics[width=\textwidth]{test_0-100.png}
	\caption{Results of 6 different percentages of commuters in a range from 0 to 100.}
\end{figure}
\newpage

If you watch the top of the graph, you can see that from a certain fraction and onwards, there is little to no difference in their behavior. To get a better view we graphed a closeup of percentages between 30 and 70. In the next graph you can see that the peeks are almost equally in height. You can even notice that some of the higher percentages have their peeks later then the ones with a lower percentage. 
\begin{figure}
	\includegraphics[width=\textwidth]{test_30-70.png}
	\caption{Results of 5 different percentages of commuters in a range from 30 to 70.}
\end{figure}
\\
Considering the recorded data we can see that solely changing the percentage of people who commute to work will not affect the spreading of disease in a significant manner. The disease will still spread all the same, but at a slower pace. 

\newpage
\section{Performance profiling of sequential code}
To study the performance of the code we will discuss a few parameters. We used the GPROF tool to profile the code. Based on these result we could see the influence of different parameters on the runtime.
\\
First we will choose a random number of days to run a simulation and look at the time needed to complete the algorithm. \\ 
\\
As could be expected, there is an increase in execution time when we take a larger amount of days. The number of days determines the number of loops in a simulation, hence this logically affects the needed time for a simulation by quite a big margin. This parameter will cause the largest change in perfomace in comparison with the other ones.

\begin{center}
	\begin{tabular}{ | c | c |}
	\hline
	Number of days & Time needed \\ \hline
	10 & 00:00:03:192:028 \\ \hline
	50 & 00:00:04:827:135 \\ \hline
	150 & 00:00:09:313:779 \\ \hline
	500 & 00:00:22:090:867 \\ \hline
	1000 & 00:00:39:660:327 \\
	\hline	
	\end{tabular}
\end{center}

\noindent
Next, we vary the parameter of population size. From the following table it is clear that the larger the population the longer the simulation needs to finish. From the GPROF analysis we notice that the most work is done in getting the count of the infected. It can be said that the size of the population delivers the most influence on the total time. One can argue that the number of days had the most impact but it is not completely realistc to study outbreaks over a number of years what takes up the most computation time. A larger population is more common than a large number of days.

\begin{center}
	\begin{tabular}{ | c | c |}
		\hline
		Population size & Time needed \\ \hline
		10000 & 00:00:00:183:206 \\ \hline
		50000 & 00:00:00:384:852 \\ \hline
		100000 & 00:00:00:692:577 \\ \hline
		600000 & 00:00:04:006:424 \\ \hline
		1000000 & 00:00:06:608:558 \\
		\hline	
	\end{tabular}
\end{center} 
\newpage
\noindent
When varying the immunity rate, there is no significant difference in runtime for different configurations. In order for this variable to have an influence on the final result, it is necessary to give other parameters different values.  As mentioned earlier, most of the time is used to sort and analyze the population, a factor like immunity rate has no effect on this process.

\begin{center}
	\begin{tabular}{ | c | c |}
		\hline
		Immunity rate & Time needed \\ \hline
		0.2 & 00:00:04:869:367 \\ \hline
		0.4 & 00:00:04:873:811 \\ \hline
		0.6 & 00:00:04:966:409 \\ \hline
		0.8 & 00:00:05:035:361 \\ \hline
		0.99 & 00:00:04:921:399 \\
		\hline	
	\end{tabular}
\end{center}
 
\noindent
Seeding rate has a slight impact, but this impact is minimal. Seeding rate has no effect on the computation needed to sort and analyze the population, which is the major faction in a simulation.
\begin{center}
	\begin{tabular}{ | c | c |}
		\hline
		Seeding rate & Time needed \\ \hline
		0.000001 & 00:00:04:684:663 \\ \hline
		0.00001 & 00:00:04:568:581 \\ \hline
		0.0001 & 00:00:04:525:856 \\ \hline
		0.001 & 00:00:04:810:693 \\ \hline
		0.01 & 00:00:05:369:309 \\
		\hline	
	\end{tabular}
\end{center} 
\noindent

The contact log mode has a significant impact on the running time of a simulation. When the standard algorithm is used (all or susceptibles) it requires a lot more time to complete the simulation. It forms a large contrast with the running time needed when using the optimized algorithm with all the members of the contact pool sorted. By reducing the number of loops in the algorithms the necessary time to complete the algorithm can be reduced along with it.
\begin{center}
	\begin{tabular}{ | c | c |}
		\hline
		Contact log mode & Time needed \\ \hline
		All & 00:16:09:012:346 \\ \hline
		Susceptibles & 00:16:48:490:700 \\ \hline
		None & 00:00:06:609:545 \\ \hline
		Transmissions & 00:00:06:747:454 \\
		\hline	
	\end{tabular}
\end{center}





\end{document}
